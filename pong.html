<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pong Game</title>
  <style>
    body {
      background: #222;
      margin: 0;
      overflow: hidden;
      color: #fff;
      font-family: Arial, sans-serif;
    }
    #gameCanvas {
      background: #111;
      display: block;
      margin: 40px auto 0 auto;
      border: 4px solid #fff;
      border-radius: 12px;
      box-shadow: 0 0 30px #0009;
    }
    #scoreboard {
      text-align: center;
      font-size: 2em;
      margin-top: 20px;
      letter-spacing: 10px;
      font-weight: bold;
    }
    #instructions {
      text-align: center;
      font-size: 1em;
      margin-top: 6px;
      color: #ccc;
    }
  </style>
</head>
<body>
  <div id="scoreboard">0 : 0</div>
  <div id="instructions">(Use mouse or ↑/↓ to move left paddle)</div>
  <canvas id="gameCanvas" width="700" height="400"></canvas>
  <script>
    // Constants
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreboard = document.getElementById('scoreboard');

    const CANVAS_W = canvas.width;
    const CANVAS_H = canvas.height;

    const PADDLE_W = 12, PADDLE_H = 70;
    const BALL_SIZE = 14;

    // Game State
    let playerY = (CANVAS_H - PADDLE_H) / 2;
    let aiY = (CANVAS_H - PADDLE_H) / 2;
    let playerScore = 0, aiScore = 0;

    let ballX = CANVAS_W / 2 - BALL_SIZE / 2;
    let ballY = CANVAS_H / 2 - BALL_SIZE / 2;
    let ballSpeedX = 5 * (Math.random() < 0.5 ? 1 : -1);
    let ballSpeedY = Math.random() * 6 - 3;

    let upPressed = false, downPressed = false;

    // Helpers
    function resetBall(scoredByAI) {
      ballX = CANVAS_W / 2 - BALL_SIZE / 2;
      ballY = CANVAS_H / 2 - BALL_SIZE / 2;
      ballSpeedX = (scoredByAI ? 5 : -5);
      ballSpeedY = Math.random() * 6 - 3;
    }

    function updateScoreboard() {
      scoreboard.textContent = `${playerScore} : ${aiScore}`;
    }

    // Input - Mouse
    canvas.addEventListener('mousemove', function(e) {
      const rect = canvas.getBoundingClientRect();
      const y = e.clientY - rect.top;
      playerY = y - PADDLE_H / 2;
      playerY = Math.max(0, Math.min(CANVAS_H - PADDLE_H, playerY));
    });

    // Input - Keyboard
    window.addEventListener('keydown', function(e) {
      if (e.key === "ArrowUp") upPressed = true;
      if (e.key === "ArrowDown") downPressed = true;
    });
    window.addEventListener('keyup', function(e) {
      if (e.key === "ArrowUp") upPressed = false;
      if (e.key === "ArrowDown") downPressed = false;
    });

    function updatePlayerPaddle() {
      if (upPressed) {
        playerY -= 7;
        if (playerY < 0) playerY = 0;
      }
      if (downPressed) {
        playerY += 7;
        if (playerY > CANVAS_H - PADDLE_H) playerY = CANVAS_H - PADDLE_H;
      }
    }

    // AI Paddle
    function updateAIPaddle() {
      const aiMiddle = aiY + PADDLE_H / 2;
      if (aiMiddle < ballY + BALL_SIZE/2 - 8) aiY += 5;
      else if (aiMiddle > ballY + BALL_SIZE/2 + 8) aiY -= 5;
      aiY = Math.max(0, Math.min(CANVAS_H - PADDLE_H, aiY));
    }

    // Collision Detection
    function checkPaddleCollision() {
      // Player Paddle
      if (
        ballX <= PADDLE_W &&
        ballY + BALL_SIZE >= playerY &&
        ballY <= playerY + PADDLE_H
      ) {
        ballX = PADDLE_W; // Prevent stick
        ballSpeedX *= -1.05;
        // Add some effect based on hit position
        let impact = (ballY + BALL_SIZE/2 - (playerY + PADDLE_H/2)) / (PADDLE_H/2);
        ballSpeedY += impact * 3;
      }
      // AI Paddle
      if (
        ballX + BALL_SIZE >= CANVAS_W - PADDLE_W &&
        ballY + BALL_SIZE >= aiY &&
        ballY <= aiY + PADDLE_H
      ) {
        ballX = CANVAS_W - PADDLE_W - BALL_SIZE;
        ballSpeedX *= -1.05;
        let impact = (ballY + BALL_SIZE/2 - (aiY + PADDLE_H/2)) / (PADDLE_H/2);
        ballSpeedY += impact * 3;
      }
    }

    // Game Loop
    function gameLoop() {
      // Update
      updatePlayerPaddle();
      updateAIPaddle();

      ballX += ballSpeedX;
      ballY += ballSpeedY;

      // Collisions
      if (ballY <= 0) {
        ballY = 0;
        ballSpeedY *= -1;
      }
      if (ballY + BALL_SIZE >= CANVAS_H) {
        ballY = CANVAS_H - BALL_SIZE;
        ballSpeedY *= -1;
      }

      checkPaddleCollision();

      // Score
      if (ballX < -BALL_SIZE) {
        aiScore++;
        updateScoreboard();
        resetBall(true);
      }
      if (ballX > CANVAS_W) {
        playerScore++;
        updateScoreboard();
        resetBall(false);
      }

      // Draw
      ctx.clearRect(0, 0, CANVAS_W, CANVAS_H);

      // Net
      ctx.save();
      ctx.strokeStyle = "#fff4";
      ctx.setLineDash([10, 16]);
      ctx.beginPath();
      ctx.moveTo(CANVAS_W/2, 0);
      ctx.lineTo(CANVAS_W/2, CANVAS_H);
      ctx.stroke();
      ctx.restore();

      // Paddles
      ctx.fillStyle = "#fff";
      ctx.fillRect(0, playerY, PADDLE_W, PADDLE_H);
      ctx.fillRect(CANVAS_W - PADDLE_W, aiY, PADDLE_W, PADDLE_H);

      // Ball
      ctx.fillStyle = "#fff";
      ctx.fillRect(ballX, ballY, BALL_SIZE, BALL_SIZE);

      requestAnimationFrame(gameLoop);
    }

    updateScoreboard();
    gameLoop();
  </script>
</body>
</html>